function addRules(){var b=$("#name").val();var a=$("#per").val();var d=$("#regex").val();var c=$("#size").val();var f=$("#returnUrl").val();var e=jsonrpc.searchRulesService.create(webCrawlerId,b,a,d,c,f,siteId);addRulesRow(e,b)}function updateRules(){var g=$("#id").val();var b=$("#name").val();var a=$("#per").val();var d=$("#regex").val();var c=$("#size").val();var f=$("#returnUrl").val();var e=jsonrpc.searchRulesService.update(webCrawlerId,g,b,a,d,c,f,siteId);if(e){showInfo("更新搜索规则成功.")}else{showInfo("更新搜索规则失败.")}}function deleteRules(){var b=$("#id").val();var a=jsonrpc.searchRulesService.remove(webCrawlerId,siteId,b);if(a){showInfo(nc.i18n("res.remove.success"))}else{showInfo(nc.i18n("res.remove.failure"));return}$("#tr_rules_"+b).remove()}function editRules(b){if(b==null||b.length==0){showInfo("请选择一条规则。");return}for(var a in rulesJson){if(rulesJson[a]["id"]!=b){continue}$("#id").val(rulesJson[a]["id"]);$("#name").val(rulesJson[a]["name"]);$("#per").val(rulesJson[a]["per"]);$("#regex").val(rulesJson[a]["regex"]);$("#size").val(rulesJson[a]["size"]);$("#returnUrl").val(rulesJson[a]["returnUrl"])}}function queryRules(){var data=jsonrpc.searchRulesService.query(webCrawlerId,siteId);data=eval(data);rulesJson=data;for(var i in data){var id=data[i]["id"];var name=data[i]["name"];addRulesRow(id,name)}}function addRulesRow(c,b){var a="<tr id='tr_rules_"+c+"'>";a+='<td><input type="radio" id="rules" name="rules" value = "'+c+'" onClick="editRules('+c+');"></td>';a+='<td><input type="text" disabled="disabled" style="width:100%" value="'+b+'"></td>';a+="</tr>";$(a).appendTo("#rulesTabel")}function querySearchData(){var data=jsonrpc.dataSearchService.query(webCrawlerId,siteId);data=eval(data);for(var i in data){var searchRulesName=data[i]["searchRulesName"];var keyword=data[i]["keyword"];var result=data[i]["result"];addSearchDataRow(searchRulesName,keyword,result)}}function addSearchDataRow(d,c,b){var a="<tr>";a+='<td style="border: 1px solid #CCCCCC">'+d+"</td>";a+='<td style="border: 1px solid #CCCCCC">'+c+"</td>";a+='<td style="border: 1px solid #CCCCCC">'+b+"</td>";a+="</tr>";$(a).appendTo("#searchDataTabel")}function searchData(){var e=$("input[name=rules]:radio[checked]").val();if(e==null||e==""){showInfo("请指定一个搜索规则。");return}var c=document.getElementById("keyword").value;var f=jsonrpc.dataSearchService.search(webCrawlerId,e,c);if(f){showInfo("成功加入搜索队列.")}else{showInfo("搜索失败.");return}var b;for(var d in rulesJson){if(rulesJson[d]["id"]!=e){continue}b=rulesJson[d]["name"]}var a="搜索中……";addSearchDataRow(b,c,a)};