function httpInterFun(option){var remoteInter={v:{webCrawlerId:null,jsonData:new Array(),formId:"interForm",tableId:"remoteInterListTable"},fn:{init:function(){$("#"+obj.v.formId).find(".create").click(function(){obj.fn.create()});$("#"+obj.v.formId).find(".remove").click(function(){obj.fn.remove()});$("#"+obj.v.formId).find(".update").click(function(){obj.fn.update()})},query:function(){moveAllTr(obj.v.tableId);queryLoading(obj.v.tableId);jsonrpc.httpInterService.query(function(result,exception,profile){if(exception){removeLoading($("#"+obj.v.formId));return}moveAllTr(obj.v.tableId);var data=result;data=eval(data);obj.v.jsonData=data;var key=""+obj.v.webCrawlerId;customInterMap.put(key,data);for(var i in data){if(isNaN(i)){continue}obj.fn.addRow(data[i]["id"],data[i]["type"],data[i]["name"],data[i]["url"],data[i]["createDate"])}removeLoading($("#"+obj.v.formId))},obj.v.webCrawlerId)},create:function(){var type=$("#"+obj.v.formId).find("#type").val();var name=$("#"+obj.v.formId).find("#name").val();var url=$("#"+obj.v.formId).find("#url").val();showLoading($("#"+obj.v.formId));jsonrpc.httpInterService.create(function(result,exception,profile){removeLoading($("#"+obj.v.formId));if(exception){return}var id=result;if(!isNaN(id)){showInfo(nc.i18n("res.create.success"));obj.fn.query();updateSelect(id,name,"ocrInter");updateSelect(id,name,"filterInter")}else{showInfo(nc.i18n("res.create.failure"))}},obj.v.webCrawlerId,type,name,url)},remove:function(){var id=getRadio(obj.v.formId,"interList");if(id==null||id.length==0){showInfo(nc.i18n("res.select"));return false}if(!confirm(nc.i18n("res.remove.confirm"))){return}showLoading($("#"+obj.v.formId));jsonrpc.httpInterService.remove(function(result,exception,profile){removeLoading($("#"+obj.v.formId));if(exception){return}var msg=result;if(msg){obj.fn.query();removeSelect(id,"ocrInter");removeSelect(id,"filterInter");showInfo(nc.i18n("res.remove.success"))}else{showInfo(nc.i18n("res.remove.failure"))}},obj.v.webCrawlerId,id)},edit:function(id){var data=obj.v.jsonData;for(var i in data){if(isNaN(i)){continue}if(data[i]["id"]==id){$("#"+obj.v.formId).find("#id").val(data[i]["id"]);$("#"+obj.v.formId).find("#type").val(data[i]["type"]);$("#"+obj.v.formId).find("#name").val(data[i]["name"]);$("#"+obj.v.formId).find("#url").val(data[i]["url"]);break}}},update:function(){var id=$("#"+obj.v.formId).find("#id").val();if(id==null||id.length==0){showInfo(nc.i18n("res.select"));return false}var type=$("#"+obj.v.formId).find("#type").val();var name=$("#"+obj.v.formId).find("#name").val();var url=$("#"+obj.v.formId).find("#url").val();showLoading($("#"+obj.v.formId));jsonrpc.httpInterService.update(function(result,exception,profile){removeLoading($("#"+obj.v.formId));if(exception){return}id=result;if(!isNaN(id)){showInfo(nc.i18n("res.update.success"));obj.fn.query();updateSelect(id,name,"ocrInter");updateSelect(id,name,"filterInter")}else{showInfo(nc.i18n("res.update.failure"))}},obj.v.webCrawlerId,id,type,name,url)},addRow:function(id,type,name,url,createDate){var typeDesc=getSelectText(obj.v.formId,"type",type);var newTr="<tr class='simplehighlight'>";newTr+='<td nowrap>&nbsp;<input type="radio" name="interList" id="interList" value="'+id+'" class="editInter"/></td>';newTr+="<td nowrap>&nbsp;"+name+"</td>";newTr+="<td nowrap>"+typeDesc+"</td>";newTr+="<td nowrap>"+url+"</td>";newTr+="<td nowrap>"+createDate+"</td>";newTr+="</tr>";var newTrObj=$(newTr);newTrObj.find(".editInter").click(function(){obj.fn.edit($(this).val())});newTrObj.appendTo("#"+obj.v.tableId);$("#"+obj.v.tableId).find("tr:odd").css("background","#FFFFFF");$("#"+obj.v.tableId).find("tr:even").css("background","rgb(247, 247, 247)");$("#"+obj.v.tableId).find(".simplehighlight").hover(function(){$(this).children().addClass("datahighlight")},function(){$(this).children().removeClass("datahighlight")})}}};var obj=this;obj.fn=remoteInter.fn;obj.v=option}var httpInter=new httpInterFun();