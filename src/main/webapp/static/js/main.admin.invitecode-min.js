var inviteCodeList={v:{formId:"inviteCodeForm",searchFormId:"inviteCodeSearchForm",tableId:"inviteCodeListTable",mainTableId:"inviteCodeTable",jsonData:new Array(),PER_PAGE_ITEMS:10,ITEMS_COUNT:0,cur_page:0},fn:{initSlider:function(a){$("#"+inviteCodeList.v.formId).find("#numSlider").slider({range:"min",min:1,max:50,value:a,slide:function(b,c){$("#"+inviteCodeList.v.formId).find("#num").val(c.value)}});$("#"+inviteCodeList.v.formId).find("#num").val($("#"+inviteCodeList.v.formId).find("#numSlider").slider("value"))},refresh:function(){inviteCodeList.fn.query(inviteCodeList.v.cur_page);inviteCodeList.fn.updateCount();inviteCodeList.fn.initPagination(inviteCodeList.v.cur_page);removeLoading($("#"+inviteCodeList.v.mainTableId))},gen:function(){var a=$("#"+inviteCodeList.v.formId).find("#num").val();var b=jsonrpc.inviteCodeService.gen(a);if(!b){showInfo("生成邀请码失败。");return}showInfo("生成邀请码成功。");inviteCodeList.fn.refresh()},exportCode:function(){var b=$("#"+inviteCodeList.v.formId).find("#num").val();var a=jsonrpc.inviteCodeService.exportCode(b);$("#trace").html(a);openTrace()},statistic:function(){var a=jsonrpc.inviteCodeService.statistic();if(a){showInfo("已启动后台统计任务。")}else{showInfo("执行统计任务失败。")}},search:function(){var b=$("#"+inviteCodeList.v.searchFormId).find("#code").val();var a=$("#"+inviteCodeList.v.searchFormId).find("#status").val();var c=jsonrpc.inviteCodeService.query(b,a);inviteCodeList.fn.showData(c);$("#"+inviteCodeList.v.mainTableId).find("#Pagination").html("")},query:function(a){var c=a*inviteCodeList.v.PER_PAGE_ITEMS;moveAllTr(inviteCodeList.v.tableId);queryLoading(inviteCodeList.v.tableId);var b=jsonrpc.inviteCodeService.query(function(d,e,f){if(e){return}moveAllTr(inviteCodeList.v.tableId);var g=d;inviteCodeList.fn.showData(g)},c,inviteCodeList.v.PER_PAGE_ITEMS)},showData:function(data){data=eval(data);inviteCodeList.v.jsonData=data;var index=1;for(var i in data){if(isNaN(i)){continue}var id=data[i]["id"];var code=data[i]["code"];var username=data[i]["username"];var status=data[i]["status"];var updateDate=data[i]["updateDate"];var createDate=data[i]["createDate"];inviteCodeList.fn.addRow(index,id,code,username,status,updateDate,createDate);index++}$("#"+inviteCodeList.v.tableId).find("tr:odd").css("background","#FFFFFF");$("#"+inviteCodeList.v.tableId).find("tr:even").css("background","rgb(247, 247, 247)");$("#"+inviteCodeList.v.tableId).find(".simplehighlight").hover(function(){$(this).children().addClass("datahighlight")},function(){$(this).children().removeClass("datahighlight")})},addRow:function(f,a,b,d,c,e,i){var h=getSelectText(inviteCodeList.v.searchFormId,"status",c);var g="<tr class='simplehighlight'>";g+="<td nowrap>"+f+"</td>";g+="<td nowrap>"+b+"</td>";g+="<td nowrap>&nbsp; "+d+"</td>";g+="<td nowrap>&nbsp; "+h+"</td>";g+="<td nowrap>&nbsp; "+e+"</td>";g+="<td nowrap>&nbsp; "+i+"</td>";g+="</tr>";$(g).appendTo("#"+inviteCodeList.v.tableId)},updateCount:function(){inviteCodeList.v.ITEMS_COUNT=jsonrpc.inviteCodeService.count();$("#"+inviteCodeList.v.mainTableId).find("#COUNT").html(inviteCodeList.v.ITEMS_COUNT)},initPagination:function(a){$("#"+inviteCodeList.v.mainTableId).find("#Pagination").pagination(inviteCodeList.v.ITEMS_COUNT,{num_edge_entries:2,num_display_entries:8,current_page:a,callback:inviteCodeList.fn.pageselectCallback,items_per_page:inviteCodeList.v.PER_PAGE_ITEMS,prev_text:"上一页",next_text:"下一页"})},pageselectCallback:function(a,b){inviteCodeList.v.cur_page=a;inviteCodeList.fn.query(inviteCodeList.v.cur_page);return false}}};$(document).ready(function(){inviteCodeList.fn.initSlider(10);inviteCodeList.fn.refresh()});