/*!
 * Copyright (c) 2015 Adam Jimenez
 *
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL (GPL_LICENSE.txt) licenses
 *
 * https://github.com/adamjimenez/ui.tabs.overflowResize
 */
(function(b){var a={option:b.ui.tabs.prototype.option,_ui:b.ui.tabs.prototype._ui,};a=b.extend(a,{add:b.ui.tabs.prototype.add,remove:b.ui.tabs.prototype.remove});b.extend(b.ui.tabs.prototype,{overflowResize:function(o){var n=this,d=false,i,j,g=null,f=false;function m(){l();b(window).on("resize",c);b(n._getList()).on("mouseover",k);b(n._getList()).on("mouseout",e);d=true;c()}function l(){b(window).off("resize",c);b(n._getList()).off("mouseenter",k);b(n._getList()).off("mouseout",e);d=false}function h(q){var u=parseFloat(window.getComputedStyle(n._getList()[0]).width);var t=n._getList().children(":not(.button)");if(!t.length){return}var p=(t[0].getBoundingClientRect().width-parseFloat(window.getComputedStyle(t[0]).width))*(n.tabs.length);var s=u-p+(18*n.tabs.length);var v=s/(n.tabs.length);var r={"max-width":v};if(q){n._getList().children(":not(.button)").animate(r,"fast")}else{n._getList().children(":not(.button)").css(r)}}function k(){f=true}function e(){f=false;if(g){clearTimeout(g)}g=setTimeout(function(){h(true)},500)}function c(q,p){if(g){clearTimeout(g)}g=setTimeout(function(){h(p)},50)}n._ui=function(q,p){return{tab:q,panel:p,index:this.anchors.index(q)}};n.add=function(r,u,t){var w=false;if(!r){r="New tab";w=true}if(!u){u=""}var v=b("<div>"+u+"</div>").appendTo(this.element.children(":last-child")).uniqueId().attr("id");var s=n._getList();var p=b(r);b(s).append(p);if(t){p.children("a").prepend('<span class="ui-icon '+t+'"></span>')}p.uniqueId();if(w){p.attr("data-newtab",1)}var q=p.index();this.refresh(this);h(true);p.on("click",function(y){if(y.which===2){var x=b(this).closest("li");n.remove(x.index())}});this.option("active",q);this._trigger("add",null,this._ui(this.tabs[q],this.panels[q]));return p};n.remove=function(s){if(s==-1){return}var p=this._trigger("beforeRemove",null,this._ui(this.tabs[s],this.panels[s]));if(p===false){return}s=this._getIndex(s);var r=this.options,t=this.tabs.eq(s).remove(),q=this._getPanelForTab(t).remove();if(t.hasClass("ui-tabs-active")&&this.anchors.length>2){this._activate(s+(s+1<this.anchors.length?1:-1))}this.refresh(this);if(!f){h()}this._trigger("remove",null,this._ui(this.tabs[s],this.panels[s]));return this};n.getPanelForTab=function(p){return this._getPanelForTab(p)};m()}})})(jQuery);