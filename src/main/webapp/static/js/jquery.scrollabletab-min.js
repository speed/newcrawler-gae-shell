(function(b){var a={animateTabs:false,showNavWhenNeeded:true,customNavNext:null,customNavPrev:null,customNavFirst:null,customNavLast:null,closable:true,easing:"",easing:"swing",loadLastTab:false,onTabScroll:function(){},resizable:false,resizeHandles:"e,s,se",scrollSpeed:150,selectTabOnAdd:true,selectTabAfterScroll:true,showFirstLastArrows:true,hideDefaultArrows:false,nextPrevOutward:false,wrapperCssClass:""};b.fn.scrollabletabs=function(c){return this.each(function(){var u=b.extend({},a,typeof c=="object"?c:{}),e=b(this).addClass(u.wrapperCssClass+" stMainWrapper"),p=e.find("ul.ui-tabs-nav:first"),m=p.find("li"),y=b('<ol class="stNavMain" />'),D=p.find(".ui-tabs-selected").addClass("stCurrentTab");if(!u.hideDefaultArrows){var A=b('<li class="stNavPrevArrow ui-state-active" title="Previous"><span class="ui-icon ui-icon-seek-prev">Previous tab</span></li>'),B=b('<li class="stNavNextArrow ui-state-active" title="Next"><span class="ui-icon ui-icon-seek-next">Next tab</span></li>'),s=u.showFirstLastArrows?b('<li class="stNavFirstArrow ui-state-active" title="First"><span class="ui-icon ui-icon-seek-first">First tab</span></li>'):b(),v=u.showFirstLastArrows?b('<li class="stNavLastArrow ui-state-active" title="Last"><span class="ui-icon ui-icon-seek-end">Last tab</span></li>'):b();y.append(A,s,v,B);var n=y.find("li").hover(function(){b(this).toggleClass("ui-state-active").toggleClass("ui-state-hover")})}function k(){p.height(m.first().outerHeight());p.after(y.css("visibility",u.showNavWhenNeeded?"hidden":"visible"));if(n){n.css({top:"-"+p.innerHeight()+"px",height:p.innerHeight()-3});if(u.nextPrevOutward){A.addClass("ui-corner-left");B.addClass("ui-corner-right");s.css("margin-left",d(y.find("li:first")));v.css("margin-right",d(y.find("li:first")))}else{s.addClass("ui-corner-left");v.addClass("ui-corner-right");u.showFirstLastArrows?A.css("margin-left",d(y.find("li:first"))):A.addClass("ui-corner-left");u.showFirstLastArrows?B.css("margin-right",d(y.find("li:first"))):B.addClass("ui-corner-right")}}z();g();q();t();e.bind("tabsshow",function(o,E){i(b(E.tab).parents("li"));if(f("n")){r("n",null,null,o)}else{if(f("p")){r("p",null,null,o)}}}).bind("tabsadd",function(E,F){var o=b(F.tab).parents("li");m=p.find("li");z(o);g();q(o);if(u.selectTabOnAdd){b(this).tabs("select",m.index(o))}}).bind("tabsremove",function(o,E){m=p.find("li");if(e.tabs("length")==1){p.find(".ui-icon-circle-close").addClass("stFirstTab").hide()}else{p.find(".ui-icon-circle-close").show();i(m.first())}g();q()})}function g(){if(!u.showNavWhenNeeded){return}if(x()>p.width()){y.css("visibility","visible").show()}else{y.css("visibility","hidden").hide();r("f",m.first(),0)}}function w(F,E,o){if(b.isFunction(F)){F(E,o)}}function f(E,G){G=G||D;if(E=="n"){var F=G[0].offsetLeft+d(G,true)+5;return(F>(d(p)-j()))}else{var o=(G[0].offsetLeft-j());return(o<0)}}function C(o){return"-"+(x(o)-p.width()+j())+"px"}function h(E){var o=(E[0].offsetLeft-j());return(parseFloat(E.css("margin-left"))-o)+"px"}function r(E,G,o,H){G=G||D;var F=0;if(E=="n"){F=C(G)}else{if(E=="p"){F=h(G)}else{if(E=="f"){F=0;o=0}else{if(E=="l"){F=C(G)}}}}m.animate({"margin-left":F},u.scrollSpeed,u.easing);if(u.selectTabAfterScroll&&o!==null){e.tabs("select",o)}else{if(o>-1){i(G)}}H=(typeof H=="undefined")?null:H;w(u.onTabScroll,H,G);if(H!=null){H.preventDefault()}}function l(o,F){var E=u["customNav"+F]||"";if(typeof E=="string"&&b.trim(E)!=""){o=o.add(E)}return o}function t(){B=B?B:b();B=l(B,"Next");B.click(function(F){var o=b();if(!u.selectTabAfterScroll){D.nextAll("li").each(function(){if(f("n",b(this))){o=b(this);return false}})}else{o=D.next("li")}if(!o.length){return false}var E=f("n",o);indexNextTab=m.index(o);if(E){r("n",o,indexNextTab,F)}else{e.tabs("select",indexNextTab)}});A=A?A:b();A=l(A,"Prev");A.click(function(G){var o=b();if(!u.selectTabAfterScroll){b(m.get().reverse()).each(function(){if(f("p",b(this))){o=b(this);return false}})}else{o=D.prev("li")}if(!o.length){return false}var F=f("p",o);var E=m.index(o);if(F){r("p",o,E,G)}else{e.tabs("select",E)}return false});s=s?s:b();s=l(s,"First");s.click(function(o){if(m.index(D)==0){return false}r("f",m.first(),0,o);return false});v=v?v:b();v=l(v,"Last");v.click(function(F){var o=D.next("li");if(!o.length){return false}var E=e.tabs("length")-1;r("l",m.last(),E,F);return false})}function i(o){p.find(".stCurrentTab").removeClass("stCurrentTab");D=o.addClass("stCurrentTab")}function z(E){if(!u.closable){return}var o=E||m;o.each(function(){var F=b(this).addClass("stHasCloseBtn");b(this).append(b("<span/>").addClass("ui-state-default ui-corner-all stCloseBtn").hover(function(){b(this).toggleClass("ui-state-hover")}).append(b("<span/>").addClass("ui-icon ui-icon-circle-close").html("Close").attr("title","Close this tab").click(function(G){e.tabs("remove",F.prevAll("li").length)}))).width(d(F))})}function j(E){if(y.css("visibility")=="hidden"){return 0}var o=u.hideDefaultArrows?0:d(A)*(u.showFirstLastArrows?2:1);return E?o/2:o}function q(K){if(K){if(m.lenght==1){return}var F=K.prev("li")||m.first(),J=parseFloat(F.css("left"));var o=F[0].offsetWidth;J=isNaN(J)?0:J;J=J+d(F,true);K.css({left:J,"margin-left":F.css("margin-left")});return}var I=j(),G=I==0?3:I+2;m.first().addClass("stFirstTab").css({left:G,"margin-left":0});var E=G;var H=parseFloat(m.last().prev("li").css("margin-left"));p.find("li:not(:first)").each(function(){b(this).css("margin-left",0)[u.animateTabs?"animate":"css"]({left:E+=d(b(this).prev("li"),true)})});m.css("margin-left",H)}function x(G){var o=0,F=G?G.prevAll("li").andSelf():m;F.each(function(){o+=d(b(this))+parseInt(b(this).css("margin-right"),10)});var E=y.css("visibility")=="visible"?j():0;return o+E}function d(o){return o[0].offsetWidth}function d(E,o){return E[0].offsetWidth}k()})}})(jQuery);