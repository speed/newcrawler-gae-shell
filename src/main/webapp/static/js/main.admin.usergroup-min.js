var userGroupList={v:{formId:"userGroupForm",searchFormId:"userGroupSearchForm",tableId:"userGroupListTable",mainTableId:"userGroupTable",jsonData:new Array(),PER_PAGE_ITEMS:10,ITEMS_COUNT:0,cur_page:0},fn:{refresh:function(){userGroupList.fn.query(userGroupList.v.cur_page);userGroupList.fn.updateCount();userGroupList.fn.initPagination(userGroupList.v.cur_page);removeLoading($("#"+userGroupList.v.mainTableId))},create:function(){var a=$("#"+userGroupList.v.formId).find("#name").val();var b=$("#"+userGroupList.v.formId).find("#description").val();var c=jsonrpc.userGroupRpcService.create(a,b);if(!isNum(c)){showInfo("添加用户组失败。");return}showInfo("添加用户组成功。");userGroupList.fn.refresh()},edit:function(e){var d=userGroupList.v.jsonData;for(var b in d){if(isNaN(b)){continue}if(e!=d[b]["id"]){continue}var e=d[b]["id"];var a=d[b]["name"];var c=d[b]["description"];$("#"+userGroupList.v.formId).find("#id").val(e);$("#"+userGroupList.v.formId).find("#name").val(a);$("#"+userGroupList.v.formId).find("#description").val(c)}},update:function(){var d=$("#"+userGroupList.v.formId).find("#id").val();if(d==null||d.length==0){showInfo("请选择一条记录。");return}var a=$("#"+userGroupList.v.formId).find("#name").val();var b=$("#"+userGroupList.v.formId).find("#description").val();var c=jsonrpc.userGroupRpcService.update(d,a,b);if(!c){showInfo("更新用户组失败。");return}showInfo("更新用户组成功。");userGroupList.fn.query(userGroupList.v.cur_page)},statistic:function(){var a=jsonrpc.userGroupRpcService.statistic();if(a){showInfo("已启动后台统计任务。")}else{showInfo("执行统计任务失败。")}},query:function(a){var c=a*userGroupList.v.PER_PAGE_ITEMS;moveAllTr(userGroupList.v.tableId);queryLoading(userGroupList.v.tableId);var b=jsonrpc.userGroupRpcService.query(function(d,e,f){if(e){return}moveAllTr(userGroupList.v.tableId);var g=d;userGroupList.fn.showData(g)},c,userGroupList.v.PER_PAGE_ITEMS)},showData:function(data){data=eval(data);userGroupList.v.jsonData=data;var index=1;for(var i in data){if(isNaN(i)){continue}var id=data[i]["id"];var name=data[i]["name"];var description=data[i]["description"];var createDate=data[i]["createDate"];userGroupList.fn.addRow(index,id,name,description,createDate);index++}$("#"+userGroupList.v.tableId).find("tr:odd").css("background","#FFFFFF");$("#"+userGroupList.v.tableId).find("tr:even").css("background","rgb(247, 247, 247)");$("#"+userGroupList.v.tableId).find(".simplehighlight").hover(function(){$(this).children().addClass("datahighlight")},function(){$(this).children().removeClass("datahighlight")})},addRow:function(c,f,b,e,d){var a="<tr class='simplehighlight'>";a+="<td nowrap>"+c+"</td>";a+="<td nowrap>"+b+"</td>";a+="<td nowrap>&nbsp; "+e+"</td>";a+="<td nowrap>&nbsp; "+d+"</td>";a+='<td nowrap style="text-align:center"> <a href="javascript:void(0)" onclick="userGroupList.fn.edit('+f+')" >编辑</a> </td>';a+="</tr>";$(a).appendTo("#"+userGroupList.v.tableId)},updateCount:function(){userGroupList.v.ITEMS_COUNT=jsonrpc.userGroupRpcService.count();$("#"+userGroupList.v.mainTableId).find("#USERGROUP_COUNT").html(userGroupList.v.ITEMS_COUNT)},initPagination:function(a){$("#"+userGroupList.v.mainTableId).find("#Pagination").pagination(userGroupList.v.ITEMS_COUNT,{num_edge_entries:2,num_display_entries:8,current_page:a,callback:userGroupList.fn.pageselectCallback,items_per_page:userGroupList.v.PER_PAGE_ITEMS,prev_text:"上一页",next_text:"下一页"})},pageselectCallback:function(a,b){userGroupList.v.cur_page=a;userGroupList.fn.query(userGroupList.v.cur_page);return false}}};$(document).ready(function(){userGroupList.fn.refresh()});