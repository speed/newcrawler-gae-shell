function crawlRulesVersionFun(b){var a={v:{webCrawlerId:null,siteId:null,jsonData:new Array(),formId:"crawlRulesVersionForm",tableId:"crawlRulesVersionTable"},fn:{init:function(){$("#"+c.v.formId).find(".save").click(function(){c.fn.save()});fillHttpRequest(c.v.formId,"httpRequestId",true);fillCustomPlugin("1",c.v.formId,"urlfetchPluginId",true,"sync_count");a.fn.edit()},edit:function(){var f=$("#"+c.v.formId).find("#id").val();if(f==null||f==undefined){return}var e=crawlRules.v.jsonDataVer;for(var d in e){if(isNaN(d)){continue}if(e[d]["id"]==f){$("#"+c.v.formId).find("#id").val(e[d]["id"]);$("#"+c.v.formId).find("#name").val(e[d]["name"]);$("#"+c.v.formId).find("input[type=checkbox][name=type][value="+e[d]["type"]+"]").attr("checked",true);$("#"+c.v.formId).find("#url").val(e[d]["url"]);$("#"+c.v.formId).find("#params").val(e[d]["params"]);$("#"+c.v.formId).find("#httpRequestId").val(e[d]["httpRequestId"]);$("#"+c.v.formId).find("#urlfetchPluginId").val(e[d]["urlfetchPluginId"]);break}}},save:function(){var j=$("#"+c.v.formId).find("#id").val();var f=$("#"+c.v.formId).find("#name").val();var g=getCheckbox(c.v.formId,"type");var e=$("#"+c.v.formId).find("#url").val();var i=$("#"+c.v.formId).find("#params").val();var d=$("#"+c.v.formId).find("#httpRequestId").val();var h=$("#"+c.v.formId).find("#urlfetchPluginId").val();showLoading($("#"+c.v.formId));jsonrpc.crawlRulesVerService.save(function(k,n,o){removeLoading($("#"+c.v.formId));if(n){return}var m=k;if(!isNaN(m)){showInfo(nc.i18n("res.save.success"));crawlRules.fn.saveRulesVersionComplete(m,f);$("#config-box").dialog("close");if(j==null||j==undefined||j==""){var p={id:m,name:f,type:g,httpRequestId:d,urlfetchPluginId:h,url:e,params:i};crawlRules.v.jsonDataVer.push(p)}else{var p=crawlRules.v.jsonDataVer;for(var l in p){if(isNaN(l)){continue}if(p[l]["id"]==j){p[l]["name"]=f;p[l]["type"]=g;p[l]["url"]=e;p[l]["params"]=i;p[l]["httpRequestId"]=d;p[l]["urlfetchPluginId"]=h;break}}}}else{showInfo(nc.i18n("res.save.failure"))}},c.v.webCrawlerId,c.v.siteId,j,f,g,d,h,e,i)}}};var c=this;c.fn=a.fn;c.v=b}var crawlRulesVersion=new crawlRulesVersionFun();