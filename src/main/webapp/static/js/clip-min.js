(function(b){var a={config:{coverBG:'<div id="box-cover-bg" style="display: none; width: 100%; height: 100%; background: rgb(0, 0, 0); opacity: 0.7; filter: alpha(opacity=70); -ms-filter: alpha(opacity=70);  background-attachment: scroll; background-position: 0px 0px;background-repeat: repeat repeat;top: 0px !important;left: 0px !important;position: fixed !important; z-index: 9999998;"></div>',cover:'<div id="box-ju-cover" style="background: url(http://www.newcrawler.com/static/images/ju_cover_bg.png) repeat; border: 1px solid #93D4FC; box-shadow: 0 0 5px #60caff; position: absolute; z-index: 99999; display: none;"></div>',ju:'<div id="box-ju" style="display: none; position: fixed !important; width: 700px; height: 450px; padding-bottom:20px; border: 2px solid #bbb; border-radius:3px; left: 50%; margin-left: -481px; z-index: 9999999; background: #F1F2F5; font-family: \'Helvetica Neue\', Helvetica, Arial, Sans-serif; text-shadow: none; box-shadow: none; outline: none;"><div style="background: #F1F2F5;"><div id="box-ju-title" style="margin: 25px 25px 20px 25px;border: none; padding: none;"><input style="background: #fff; outline: none; border-radius: 3px; border: 1px solid #bbb; line-height: 30px;height: 30px; margin: 0; width: 100%; padding: 5px 0;align:left;" id="box-ju-post-title" type="text" value="标题" onfocus="this.style.borderRadius=\'3px\';this.style.border=\'1px solid #bbb\';this.style.boxShadow=\'none\';" /></div><div id="box-ju-iframe-holder" style="background: #fff;  padding: 10px; border: 1px solid #bbb; margin: 25px 25px 20px 25px;"><div id="box-ju-content" name="boxju" style="border: none; overflow: no; "><textarea id="box-ju-post-content" style="width: 100%; height:280px; border: 0px; "></textarea></div></div></div><div id="box-ju-action-holder" style="width:100%; height: 35px;float: left; background: #F1F2F5; text-align: left;color: #999; border: none; background: none;"><div style="height: 32px; line-height:25px;padding: 0px 30px 0px 0px; display: inline-block; float: right;"><span id="box-close-button" onmouseover="this.style.color=\'#666\';" onmouseout="this.style.color=\'#aaa\';" style="color: #aaa; font-family: \'Segoe UI light\', \'Microsoft Yahei\'; cursor: pointer;position: relative;display: inline-block;text-decoration: none; border-radius: 2px; text-align: center; font-size: 20px;font-weight: bold;">关闭</span></div></div>',contentStyle:"<style>* {-webkit-margin-before: 0px;-webkit-margin-after: 0px;-webkit-margin-start: 0px;-webkit-margin-end: 0px;-webkit-padding-start: 0px;}</style>",message:'<div id="box-ju-message" style="background: #FFD76E; border: 1px solid #E1BA53; border-radius: 2px;padding: 5px 15px; font-size: 12px; font-color: #333; font-weight: bold; position: fixed!important; top: 10px; left: 50%; z-index: 99999999; display: none;"></div>'},src:null,origin:null,originSize:null,chs:[],clipped:false,data:"",type:"",tool:{browser:null,browserVersion:null,getBrowserInfo:function(){var c=navigator.userAgent.toLowerCase();var d={ie:/msie/.test(c)&&!/opera/.test(c),opera:/opera/.test(c),safari:/version.*safari/.test(c),chrome:/chrome/.test(c),firefox:/gecko/.test(c)&&!/webkit/.test(c)};return d},getIEVer:function(){var d=navigator.userAgent;var c=d.indexOf("MSIE ");if(c<0){return 0}return parseInt(d.substring(c+5,d.indexOf(";",c)))}},handler:{bodyMouseover:function(g){if(a.clipped){return}var g=g||b.event;var h=g.srcElement||g.target;if(h.tagName=="BODY"){return}if(h.id=="box-ju-cover"){return false}var d=a.fn.readXPath(h);if(a.xpath!=d){a.fn.message("show",d+'，按 <a href="javascript:void(0);" style="color: #205F82;" onclick="box.handler.removeJuCover();">ESC</a> 退出！ ')}var c=document.getElementById("box-ju-cover");c.style.display="block";c.style.width=h.offsetWidth+"px";c.style.height=h.offsetHeight+"px";var f=a.fn.getPosition(h);c.style.left=(f.x-1)+"px";c.style.top=(f.y-1)+"px";a.chs=[];a.fn.gen(a.chs,h);a.origin=g.srcElement||g.target;a.originSize={w:h.offsetWidth,h:h.offsetHeight}},bodyMousemove:function(h){if(a.clipped){return}var h=h||b.event;var j=h.srcElement||h.target;if(j.tagName=="BODY"){return}if(j.offsetWidth==document.body.offsetWidth){return}if(j.id=="box-ju-cover"){for(var f=0;f<a.chs.length;f++){var g=a.chs[f];var c=h.pageX||h.clientX+(document.documentElement.scrollLeft)||document.body.scrollLeft;var k=h.pageY||h.clientY+(document.documentElement.scrollTop)||document.body.scrollTop;if(c>=g.x&&c<=g.x+g.w&&k>=g.y&&k<=g.y+g.h){var d=document.getElementById("box-ju-cover");d.style.display="none";return}}}},bodyMouseout:function(d){var c=document.getElementById("box-ju-cover");var d=d||b.event;var f=d.srcElement||d.target},removeJuCover:function(d){d=d||b.event;var c=d.which||d.keyCode||d.charCode;if(c==0||c==undefined||c==27){if(a.tool.browser.ie&&a.tool.browserVersion<9){document.body.onmouseover=null;document.body.onmousemove=null;document.body.onmouseout=null}else{document.body.removeEventListener("mouseover",a.handler.bodyMouseover,false);document.body.removeEventListener("mousemove",a.handler.bodyMousemove,false);document.body.removeEventListener("mouseout",a.handler.bodyMouseout,false)}a.fn.message("hide")}document.getElementById("box-ju-cover").style.display="none";a.fn.clipped=false;return},juClick:function(){if(a.clipped){return false}a.clipped=true;a.fn.message("hide");var g=(document.body.clientWidth-700)/2;var c=(document.body.clientHeight-500)/2;document.getElementById("box-ju-cover").style.display="none";document.getElementById("box-cover-bg").style.display="block";document.getElementById("box-ju").style.display="block";var e=document.getElementById("box-ju");var f=document.getElementById("box-ju-iframe-holder");e.style.top="50%";e.style.marginTop="-"+(e.clientHeight/2)+"px";var d=a.fn.readXPath(a.origin);document.getElementById("box-ju-post-title").value=d;if(a.type=="normal"){a.data=a.origin.innerHTML;a.data=a.data.replace("/n","/r/n")}document.getElementById("box-ju-post-title").select();a.fn.copyXPath(d);document.getElementById("box-ju-post-content").value=a.data;document.getElementById("box-close-button").onclick=a.handler.cancleButtonClick},cancleButtonClick:function(c){a.fn.message("hide");a.fn.deleteNode("box-ju");a.fn.deleteNode("box-cover-bg");a.fn.init()}},fn:{gen:function(g,j){if(!j){return}var k=j.childNodes;for(var f=0,c=k.length;f<c;f++){j=k[f];if(j.hasChildNodes){a.fn.gen(g,j)}var d=a.fn.getPosition(j);var h={};h.w=j.offsetWidth;h.h=j.offsetHeight;h.x=d.x;h.y=d.y;g.push(h)}},getPosition:function(d){var c=0;var f=0;try{while(d.offsetParent){c+=d.offsetLeft;f+=d.offsetTop;d=d.offsetParent}}catch(d){}return{x:c,y:f}},readXPath:function(e){if(e.id!==""){return'//*[@id="'+e.id+'"]'}if(e==document.body){return"/html/"+e.tagName}var c=0;var g=e.parentNode.childNodes;for(var d=0;d<g.length;d++){var f=g[d];if(f==e){return a.fn.readXPath(e.parentNode)+"/"+e.tagName+((c+1)==1?"":"["+(c+1)+"]")}if(f.nodeType==1&&f.tagName==e.tagName){c++}}},copyXPath:function(d){if(b.clipboardData){b.clipboardData.clearData();b.clipboardData.setData("Text",d);a.fn.message("show","XPath表达式已复制!")}else{if(navigator.userAgent.indexOf("Opera")!=-1){b.location=d}else{if(b.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(i){alert("被浏览器拒绝！/n请在浏览器地址栏输入'about:config'并回车/n然后将'signed.applets.codebase_principal_support'设置为'true'")}var g=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!g){return}var f=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!f){return}f.addDataFlavor("text/unicode");var j=new Object();var c=new Object();var j=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var k=d;j.data=k;f.setTransferData("text/unicode",j,k.length*2);var h=Components.interfaces.nsIClipboard;if(!g){return false}g.setData(f,null,h.kGlobalClipboard);a.fn.message("show","XPath表达式已复制!")}else{a.fn.message("show","复制XPath表达式失败，请手动复制!")}}}},deleteNode:function(e){var d=document.getElementById(e);if(!d){return}var c=d.parentNode;c.removeChild(d)},loadJs:function(){document.script=document.createElement("script");document.script.id="box-jquery";document.script.setAttribute("type","text/javascript");document.script.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");document.body.appendChild(document.script)},message:function(e,d,f){var c=document.getElementById("box-ju-message");if(e=="show"){c.innerHTML=d;c.style.display="block";c.style.marginLeft=-((c.clientWidth)/2)+"px"}else{if(e=="fade"){c.innerHTML=d;c.style.display="block";c.style.marginLeft=-((c.clientWidth)/2)+"px";setTimeout("box.fn.message('hide')",f)}else{if(e=="hide"){c.innerHTML="";c.style.display="none"}}}},init:function(){a.tool.browser=a.tool.getBrowserInfo();a.tool.browserVersion=a.tool.getIEVer();if(!document.getElementById("box-cover-bg")){document.body.insertAdjacentHTML("beforeEnd",a.config.coverBG)}if(!document.getElementById("box-ju-message")){document.body.insertAdjacentHTML("beforeEnd",a.config.message)}if(!((a.tool.browser.ie&&a.tool.browserVersion>=7)||a.tool.browser.safari||a.tool.browser.chrome||a.tool.browser.firefox)){a.fn.message("show",'当前网页不支持低版本浏览器采集，请<a target="_blank" href="javascript:void(0)" style="color: #205F82;">升级</a>您的浏览器');return false}if(!document.getElementById("box-ju-cover")){document.body.insertAdjacentHTML("beforeEnd",a.config.cover)}if(!document.getElementById("box-ju")){document.body.insertAdjacentHTML("beforeEnd",a.config.ju)}a.type="normal";a.fn.boot()},boot:function(){a.clipped=false;a.chs=[];if(a.tool.browser.ie&&a.tool.browserVersion<9){document.body.onmouseover=a.handler.bodyMouseover;document.body.onmousemove=a.handler.bodyMousemove;document.body.onmouseout=a.handler.bodyMouseout;document.onkeydown=a.handler.removeJuCover}else{document.body.addEventListener("mouseover",a.handler.bodyMouseover,false);document.body.addEventListener("mousemove",a.handler.bodyMousemove,false);document.body.addEventListener("mouseout",a.handler.bodyMouseout,false);document.body.addEventListener("keydown",a.handler.removeJuCover,false)}document.getElementById("box-ju-cover").onclick=a.handler.juClick;a.fn.message("show",'<div style="height:20px;">移动鼠标选择区域读取XPATH，按 <a href="javascript:void(0);" style="color: #205F82;" onclick="box.handler.removeJuCover();">ESC</a> 退出！</div>')}}};b.box=a;a.fn.init()})(window);