var errorReportList={v:{formId:"errorReportForm",searchFormId:"errorReportSearchForm",tableId:"errorReportListTable",mainTableId:"errorReportTable",jsonData:new Array(),PER_PAGE_ITEMS:10,ITEMS_COUNT:0,cur_page:0},fn:{refresh:function(){errorReportList.fn.query(errorReportList.v.cur_page);errorReportList.fn.updateCount();errorReportList.fn.initPagination(errorReportList.v.cur_page);removeLoading($("#"+errorReportList.v.mainTableId))},update:function(a){},remove:function(b){var a=jsonrpc.errorReportJsonRPCService.remove(b);if(a){showInfo("删除成功。");errorReportList.fn.refresh()}else{showInfo("删除失败。")}},queryUser:function(id){var data=jsonrpc.errorReportJsonRPCService.queryUser(id);data=eval(data);var users="";for(var i in data){if(isNaN(i)){continue}var count=data[i]["count"];var user=data[i]["user"];if(users!=""){users+=", "}users+=user+"("+count+")"}return users},statistic:function(){var a=jsonrpc.errorReportJsonRPCService.statistic();if(a){showInfo("已启动后台统计任务。")}else{showInfo("执行统计任务失败。")}},search:function(){errorReportList.v.cur_page=0;errorReportList.fn.query(0)},query:function(a){var d=a*errorReportList.v.PER_PAGE_ITEMS;var b=$("#"+errorReportList.v.searchFormId).find("#user").val();moveAllTr(errorReportList.v.tableId);queryLoading(errorReportList.v.tableId);var c=jsonrpc.errorReportJsonRPCService.query(function(e,f,g){if(f){return}moveAllTr(errorReportList.v.tableId);var h=e;errorReportList.fn.showData(h)},b,d,errorReportList.v.PER_PAGE_ITEMS)},showData:function(data){data=eval(data);errorReportList.v.jsonData=data;var index=1;for(var i in data){if(isNaN(i)){continue}var id=data[i]["id"];var count=data[i]["count"];var log=data[i]["log"];var status=data[i]["status"];var createDate=data[i]["createDate"];var users=errorReportList.fn.queryUser(id);errorReportList.fn.addRow(index,id,count,log,status,createDate,users);index++}$("#"+errorReportList.v.tableId).find("tr:odd").css("background","#FFFFFF");$("#"+errorReportList.v.tableId).find("tr:odd").find("textarea").css("background","#FFFFFF");$("#"+errorReportList.v.tableId).find("tr:even").css("background","rgb(247, 247, 247)");$("#"+errorReportList.v.tableId).find("tr:even").find("textarea").css("background","rgb(247, 247, 247)")},addRow:function(c,h,f,e,b,d,g){var a="<tr class='simplehighlight'>";a+="<td nowrap>"+c+"</td>";a+='<td nowrap><textarea id="log_id_'+h+'" style="width:98%;overflow-x:visible;overflow-y:visible;"  rows="8">...</textarea></td>';a+="<td nowrap>&nbsp; "+g+"</td>";a+="<td nowrap>&nbsp; "+b+"</td>";a+="<td nowrap>"+f+"</td>";a+="<td nowrap>&nbsp; "+d+"&nbsp; &nbsp; </td>";a+='<td nowrap style="text-align:center"> <a href="javascript:void(0)" onclick="errorReportList.fn.update('+h+')" >处理</a> | <a href="javascript:void(0)" onclick="errorReportList.fn.remove('+h+')" >删除</a> </td>';a+="</tr>";$(a).appendTo("#"+errorReportList.v.tableId);$("#"+errorReportList.v.tableId).find("#log_id_"+h).val(e)},updateCount:function(){errorReportList.v.ITEMS_COUNT=jsonrpc.errorReportJsonRPCService.count();$("#"+errorReportList.v.mainTableId).find("#ACCOUNT_COUNT").html(errorReportList.v.ITEMS_COUNT)},initPagination:function(a){$("#"+errorReportList.v.mainTableId).find("#Pagination").pagination(errorReportList.v.ITEMS_COUNT,{num_edge_entries:2,num_display_entries:8,current_page:a,callback:errorReportList.fn.pageselectCallback,items_per_page:errorReportList.v.PER_PAGE_ITEMS,prev_text:"上一页",next_text:"下一页"})},pageselectCallback:function(a,b){errorReportList.v.cur_page=a;errorReportList.fn.query(errorReportList.v.cur_page);return false}}};$(document).ready(function(){errorReportList.fn.refresh()});