<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Data publish rules</title>
</head>

  <body>
    
	
    <table width="100%" id="DataDeployTable">     
      <tr>
	  <td  valign="top" >
	  <form  id="deployForm" name="deployForm" method="post">
	  <input type="hidden" id="id" name="id">
	  <table width="100%" height="100%" class="table_border2" style="table-layout:fixed;">
	  <tr>
        <td width="120"  align="right" class="label">Name:</td>
        <td class="td_border" style="width:100%">
        <div class="inputOver">
        <input name="name"  type="text" id="name" value=""  style="width:100%"/>
        </div>
        </td>
      </tr>
      <tr>
        <td width="120"  align="right" class="label">Status:</td>
        <td class="td_border">
        	<select id="status" name="status" style="width:160px;">
         			<option value="ACTIVE">Active</option>
         			<option value="INACTIVE">Inactive</option>
       		</select>
        </td>
      </tr>	
      <tr>
        <td width="120"  align="right" class="label">
        <a class="tooltip" href="javascript:void(0);" title="Whether to update the status of data crawled after the published.">Update Status:</a>
        </td>
        <td class="td_border">
        <input type="radio"  name="updateStatus" id="updateStatus" value="Y" checked="checked">Yes
        <input type="radio"  name="updateStatus" id="updateStatus" value="N">No
        </td>
      </tr>	
       <tr>
        <td width="120"  align="right" class="label">When:</td>
        <td class="td_border">
	        <input type="radio"  name="when" id="when" value="1">Sync
	        <input type="radio"  name="when" id="when" value="2" checked="checked">Schedule
        </td>
      </tr>
      
      <tr>
        <td width="120"  align="right" class="label">Way:</td>
        <td class="td_border">
	        <input type="radio"  name="where" id="where" value="1" onchange="dataDeployInter.fn.changeWhere(this.value)" checked="checked">API
	        <input type="radio"  name="where" id="where" value="2" onchange="dataDeployInter.fn.changeWhere(this.value)">Plug-in
	        <input type="radio"  name="where" id="where" value="3" onchange="dataDeployInter.fn.changeWhere(this.value)">Email
	        <input type="radio"  name="where" id="where" value="4" onchange="dataDeployInter.fn.changeWhere(this.value)">URL List
        </td>
      </tr>	
      
      <tr id="emailNoticeIdTr">
		<td width="120" align="right" nowrap class="label"><a class="tooltip" href="javascript:void(0);" title="Need to be defined in ‘setting’> ‘Email notice’">Email Template</a></td>
		<td class="td_border">
			<select id="emailNoticeId" name="emailNoticeId" style="width:160px;">
          			<option value=""></option>
       		</select>
       		<span class="configBox" lang="EmailNotice.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
		</td>
	</tr>
      
      <tr id="deployPluginIdTr">
		<td width="120" align="right" nowrap class="label"><a class="tooltip" href="javascript:void(0);" title="Data publish plug-in, need to be defined in ‘setting’> ‘plug-in management’">Publish Plug-in:</a></td>
		<td class="td_border">
			<select id="deployPluginId" name="deployPluginId" style="width:160px;">
          			<option value=""></option>
       		</select>
       		<span class="configBox" lang="PluginManage.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
		</td>
	</tr>
	
	<tr id="deployUrlTr">
        <td width="120"  align="right" class="label">API:</td>
        <td class="td_border">
        <div class="inputOver">
        <input name="deployUrl"  type="text" id="deployUrl" value="http://"  style="width:100%"/>
        </div>
        </td>
      </tr>
      
	<tr id="httpRequestIdTr">
		<td width="120" align="right" nowrap class="label"><a class="tooltip" href="javascript:void(0);" title="Need to be defined in ‘Setting’>’HTTP request’">HTTP Request:</a></td>
		<td class="td_border">
			<select id="httpRequestId" name="httpRequestId" style="width:160px;">
          			<option value=""></option>
       		</select>
       		<span class="configBox" lang="HttpRequest.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
		</td>
	</tr>
	
	<tr id="siteIdTr">
		<td width="120" align="right" nowrap class="label"><a class="tooltip" href="javascript:void(0);" title="Publish the URL on specific task">Target Task:</a></td>
		<td class="td_border">
			<select id="siteIdByURL" name="siteIdByURL" style="width:160px;">
          			<option value=""></option>
       		</select>
		</td>
	</tr>
	  
	<tr id="crawlRulesVerIdTr">
        <td width="120" align="right" nowrap class="label">
        <a class="tooltip" href="javascript:void(0);" title="If publish rules are limited, they can only apply to specific crawling rule versions and data matched in other versions will not call this publish rule in its publish; if they are not set, they can be applied in all versions.">Rule Version</a>
        </td>
        <td>
        <select id="crawlRulesVerId" name="crawlRulesVerId" style="width:160px;" onChange="dataDeployInter.fn.changeRulesVer(this.value)">
          	<option value=""></option>
       	</select>
        </td>
      </tr>
      
	  <tr id="rulesIdTr">
		<td width="120" align="right" nowrap class="label"><a class="tooltip" href="javascript:void(0);" title="Publish the label value as URL, The label where the URL is located">URL Location:</a></td>
		<td class="td_border">
			<select id="rulesLabel" name="rulesLabel" style="width:160px;" onchange="dataDeployInter.fn.changeRulesLabel(this.value)">
          			<option value=""></option>
       		</select>
       		 <input name="labelByURL"  type="text" id="labelByURL" value=""  style="width:200px"/>
		</td>
	  </tr>
      
      <tr class="descTr"><td width="120" ></td>
        <td>
        	<input type="button" id="advanced-settings-expander" class="link-button">
        </td>           
      </tr>
    
	  <tr class="advanced-settings">
        <td width="120" ></td>
        <td>
        <div style="float:left;width:100%;padding: 6px 6px 6px 0px;color: #6A86DA;" id="initDeployParams">
        </div>
        <div style="float:left;width:100%;padding: 6px 6px 6px 0px;color: red;" >
        	Note: the system will automatically add two parameters crawlUrl (URL crawled) and md5Digest (Data's MD5); if the two values are used, please do not add any parameter with the same names.
        </div>
        </td>
      </tr>
      
      <tr id="deployParamsTr">
        <td width="120"  align="right" class="label">
        <a class="tooltip" href="javascript:void(0);" title="Format: 'name=${label name}&name=value${label name}...' <br/> use the format '${label name}' to read data matched by the rule">Submit Data:</a>
        </td>
        <td class="td_border">
        <div style="padding-right: 3px;">
        <textarea rows="3" id="deployParams" name="deployParams" style="word-break:break-all;overflow-y:visible;height:60px;width:100%;padding: 0px;margin: 0px"></textarea>
        </div>
        </td>
      </tr>
      
      <tr id="deployMessageTr">
        <td width="120"  align="right" class="label">
         <a class="tooltip" href="javascript:void(0);" title="If the returned data in the publish interface is in conformity with this item, it means the publish is successful; space means verification is not applied.">Message:</a>
        </td>
        <td class="td_border">
        <div class="inputOver">
        <input name="message"  type="text" id="message" value=""  style="width:100%"/>
        </div>
        </td>
      </tr>
      
      <!-- start -->
    	<tr id="uploadImageTr">
       	<td width="120" ></td>
       	<td class="td_border">
			<table ><tr><td><input id="isUploadImage" name="isUploadImage" type="checkbox" value="Y" onclick="dataDeployInter.fn.showTable(this, 'uploadImageTable')"/></td><td>Save File</td></tr></table>
			<table id="uploadImageTable" width="100%" height="100%"   style="border: 1px solid #99999;display:none;" align="left">
				<tr>
			        <td width="120"  align="right" nowrap>
			        <a class="tooltip" style="font-weight:normal;"  href="javascript:void(0);" title="File saving plug-in, need to be defined in ‘Setting’ > ’plug-in management’">Save Plug-in:</a>
			        </td>
			        <td class="td_border" style="width:160px;">
				        <select id="fileSavePluginId" name="fileSavePluginId" style="width:160px;">
	          				<option value=""></option>
	       				</select>
       				</td>
       				<td nowrap="nowrap"   width="150px"  align="right">
		        	<a class="tooltip" style="font-weight:normal;" title="Use the regular expression to match the URL where file is downloaded and return the content of the first group in the regular expression."  href="javascript:void(0);">File URL(regex):</a>
		        	</td>
		        	<td  style="width:100%;"  align="left">
		        	<div class="inputOver">
		        		<input style="width:100%;" id="fileSavePluginRegex" type="text" name="fileSavePluginRegex"/> 
		        		</div>
		        	</td>
			    </tr>
			    <tr>
			        <td width="120"  align="right" nowrap>
			        	<a class="tooltip" style="font-weight:normal;" href="javascript:void(0);" title="Split with ’,’ in the case of multiple labels, with the format of '${label name 1},${label name 2},...">File Label:</a>
			        </td>
			        <td class="td_border">
			        	<input type="text" id="imageLabels" name="imageLabels" style="width:162px;"/>
					</td>
					<td nowrap="nowrap"   width="150px"  align="right">
		        	<a class="tooltip" style="font-weight:normal;" title="It is allowed to use ${sysDate} to capture system date with a date format of yyyyMMdd. It is allowed to use the format of '${label name}' to read data matched by the crawling rules."  href="javascript:void(0);">Sub-directory</a>
		        	</td>
		        	<td  style="width:100%;"  align="left">
		        	<div class="inputOver">
		        		<input style="width:100%;" id="fileSaveSubDir" type="text" name="fileSaveSubDir"/> 
		        		</div>
		        	</td>
			    </tr>
	        </table>
		</td>
      	</tr>
	<!-- end -->
	<!-- start -->
	<tr>
        <td width="120" >
        </td>
        <td class="td_border">
        <table ><tr><td><input id="isUpdateUrlStatus" name="isUpdateUrlStatus" type="checkbox" value="Y" onclick="dataDeployInter.fn.showTable(this, 'updateUrlStatusTable')"/></td><td><a class="tooltip" style="font-weight:normal;" title="Whether to update the status of data crawled after the published."  href="javascript:void(0);">Update URL Status:</a></td></tr></table>
			
        <table id="updateUrlStatusTable" width="100%" height="100%"   style="border: 1px solid #99999;display:none;" align="left">
        	
        	<tr>
	        	<td nowrap="nowrap"  width="100"  align="right" >
	        	<a class="tooltip" style="font-weight:normal;" title="Update URL status when specific conditions are satisfied"  href="javascript:void(0);">Condition</a>
	        	
	        	</td>
	        	<td  style="width:100%;"   align="left" colspan="3" nowrap>
	        	<div class="conditionRulesDiv">
	        		<div id="conditionRulesDiv1" class="definitionConditionRules" style="width: 690px;">
	        			<div class="conditionRules" style="height: 25px; margin-top: 6px;float: left;width: 100px;">
	        			<input type="radio" name="cus_condition1" value="or" disabled="disabled">OR <input type="radio" name="cus_condition1" value="and" checked="checked"  disabled="disabled">AND
	        			</div>
	        			<div class="conditionRulesLeft">
	        			<select id="cus_label" name="cus_label" style="width:160px;">
		          			<option value="" selected>Select Label</option>
		       			</select>
		       			<select name="cus_contain" id="cus_contain" >
							<option value="Y">Contain</option>
							<option value="N">Not Contain</option>
						</select>
						Enabled Regex<input name="cus_regex" type="checkbox" id="cus_regex" value="true" >
		       		 	<input name="cus_data"  type="text" id="cus_data" value=""  style="width:200px"/>
		       		 	</div>
		       		 	
		       		 	<div class="addLabel" style="margin-top: 3px;">
						<a href="javascript:void(0);"  onclick="dataDeployInter.fn.addConditionRulesDiv()">+</a>
						</div>
	        		</div>
				</div>
				
	        	</td>
        	</tr>
        	
        	<tr>
	        	<td nowrap="nowrap"  width="100"  align="right" >
	        	Status
	        	</td>
	        	<td  style="width:100%;"   align="left" colspan="3" nowrap>
	        	<input name="urlStatus"  type="text" id="urlStatus" value="1"  style="width:200px"/>
	        	</td>
        	</tr>
        	
        </table>
        
        </td>
      </tr>
      <!-- end -->
      <tr>
        <td width="120" ></td>
        <td class="td_border">
        <input type="button" value="Create" onClick="dataDeployInter.fn.create();">
        <input type="button" value="Remove" onclick="dataDeployInter.fn.remove()">
        <input type="button" value="Update" onClick="dataDeployInter.fn.update();">
        <input type="button" value="Test" onClick="dataDeployInter.fn.deploy();">
        </td>
      </tr>
		<tr>
			<td colspan="5">
				<table id="deployListTable" width="100%" align="center" class="table_border2 tableList" style="table-layout:fixed;border:1px solid #CCCCCC;border-collapse:collapse;background-color: #FFFFFF;">
					<tr>
						<td width="5%" nowrap bgcolor="whiteSmoke">&nbsp;Select</td>
						<td width="10%" nowrap bgcolor="whiteSmoke">&nbsp;&nbsp;&nbsp;Name</td>
						<td width="5%" nowrap bgcolor="whiteSmoke">Status</td>
						<td width="5%" nowrap bgcolor="whiteSmoke">Update Publish Status</td>
						<td width="10%" nowrap bgcolor="whiteSmoke">Publish Time</td>
						<td width="65%" nowrap bgcolor="whiteSmoke">Detail</td>
					</tr>
				</table>
				</td>
		</tr>
	  </table>
	   </form>
	  </td>
	  </tr>
	  
	  
	  
  </table>
  <script type="text/javascript">
  $(document).ready(function() { 
	  var initFun= function(){

			dataDeployInter.v.webCrawlerId=webCrawlerId;
			dataDeployInter.v.siteId=siteId;
			dataDeployInter.v.jsonData=null;
			dataDeployInter.v.index=1;
			
			dataDeployInter.fn.changeWhere("1");
			fillCustomPlugin("4", dataDeployInter.v.formId, "deployPluginId", false);
			fillCustomPlugin("3", dataDeployInter.v.formId, "fileSavePluginId", false);
			fillHttpRequest(dataDeployInter.v.formId, "httpRequestId", true);
			fillEmailNotice(dataDeployInter.v.formId, "emailNoticeId", false);
			fillSite(dataDeployInter.v.formId, "siteIdByURL");
			fillRulesVer(dataDeployInter.v.formId, "crawlRulesVerId", true);
			
			dataDeployInter.fn.init();
			dataDeployInter.fn.query();
			poshytip('.tooltip');
		  };
		  
		
		var initLoading=setInterval(function(){
			if(typeof dataDeployInter != 'undefined'){
				clearInterval(initLoading);
				initFun();
			}
		},500);
		
	});

  </script>
  </body>
</html>
